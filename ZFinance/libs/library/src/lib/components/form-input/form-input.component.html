<ng-container *ngIf="formGroupDirective.form?.enabled || isFormEditMode;else disabledControl">
    <ng-container [ngSwitch]="type">
        
        <textarea *ngSwitchCase="'textarea'"
        [attr.autofocus]="autofocus ? true : null"
        [attr.maxLength]="maxLength ?? null"
        [attr.rows]="rows"
        [class.invalid]="invalid"
        [formControlName]="controlName"
        (blur)="onBlur()"
        (focus)="onFocus()"
        (input)="onInput()">
        </textarea>

        <ng-container *ngSwitchCase="'checkbox'">
            <input *ngIf="isFormControl; else fixedCheckbox"
            class="switch"
            type="checkbox"
            [attr.autofocus]="autofocus ? true : null"
            [class.invalid]="invalid"
            [formControlName]="controlName"
            (blur)="onBlur()"
            (focus)="onFocus()"
            (input)="onInput()" />

            <ng-template #fixedCheckbox>
                <input
                class="switch"
                type="checkbox"
                [(ngModel)]="fixedValue"
                [attr.readonly]="true"
                [class.invalid]="invalid"
                [class.readonly-as-disabled]="displayReadOnlyAsDisabled"
                [disabled]="isDisabled"
                [ngModelOptions]="{ standalone: true }"
                (blur)="onBlur()"
                (change)="onChange($event)"
                (focus)="onFocus()"
                (input)="onInput()"
                (ngModelChange)="onValueChanged($event)" />
            </ng-template>
        </ng-container>


        <ng-container *ngSwitchDefault>
            <input *ngIf="isFormControl; else fixedTextBox"
            [attr.autofocus]="autofocus ? true : null"
            [attr.maxLength]="maxLength ?? null"
            [attr.readonly]="readOnly ? true : null"
            [attr.step]="stepAttributeValue"
            [class.invalid]="invalid"
            [class.readonly-as-disabled]="displayReadOnlyAsDisabled"
            [formControlName]="controlName"
            [type]="type"
            (blur)="onBlur()"
            (focus)="onFocus()"
            (input)="onInput()" />

            <ng-template #fixedTextBox>
                <input
                type="text"
                [attr.maxLength]="maxLength ?? null"
                [attr.readonly]="true"
                [attr.step]="stepAttributeValue"
                [class.invalid]="invalid"
                [class.readonly-as-disabled]="displayReadOnlyAsDisabled"
                [disabled]="isDisabled"
                [ngModel]="type === 'date' || type === 'datetime-local' ? (fixedValue | date: format) : ( type === 'number' ? (fixedValue | number) : fixedValue )" 
                [ngModelOptions]="{ standalone: true }"
                (blur)="onBlur()"
                (focus)="onFocus()"
                (input)="onInput()"
                (ngModelChange)="onValueChanged($event)" />
            </ng-template>
        </ng-container>

    </ng-container>
</ng-container>

<ng-template #disabledControl>
    <ng-container [ngSwitch]="type">
        <label *ngSwitchCase="'checkbox'">
            <i [ngClass]="fixedValue ?? formGroupDirective.form.get(disabledControlName ?? controlName)?.value ? 'fa-solid fa-square-check' : 'fa-regular fa-square'"></i>
        </label>

        <label *ngSwitchCase="'date'">
            {{ fixedValue ?? formGroupDirective.form.get(disabledControlName ?? controlName)?.value | date: format }}
        </label>

        <label *ngSwitchCase="'datetime-local'">
            {{ fixedValue ?? formGroupDirective.form.get(disabledControlName ?? controlName)?.value | date: format }}
        </label>

        <label *ngSwitchCase="'number'">
            {{ fixedValue ?? formGroupDirective.form.get(disabledControlName ?? controlName)?.value | number: format }}
        </label>

        <label class="text" *ngSwitchDefault>{{ fixedValue ?? formGroupDirective.form.get(disabledControlName ?? controlName)?.value }}</label>
    </ng-container>
</ng-template>

<ng-template #fixedTextbox let-fixedValue="fixedValue">
    
</ng-template>